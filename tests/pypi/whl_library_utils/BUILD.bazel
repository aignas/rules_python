load("@bazel_skylib//rules:diff_test.bzl", "diff_test")

diff_test(
    name = "whl_library_utils_test",
    failure_message = (
        "Please run 'bazel run //python/private/pypi:whl_library_utils.update' " +
        "to update the 'whl_library_utils.bzl' module found in the same package."
    ),
    file1 = "//python/private/pypi:whl_library_utils",
    file2 = "//python/private/pypi:whl_library_utils.bzl",
    # TODO: The diff_test here fails on Windows. As does the
    # install script. This should be fixed.
    target_compatible_with = select({
        "@platforms//os:windows": ["@platforms//:incompatible"],
        "//conditions:default": [],
    }),
)
